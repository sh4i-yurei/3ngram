# CI pipeline — 3ngram
#
# Calls reusable gate workflows from policies-and-standards (STD-030).
# Gates run in parallel on pull requests targeting main.
#
# Workflow refs use @main because reusable gate workflows were added
# after the v2.0.0 tag and do not exist at that ref.

name: CI

on:
  pull_request:
    branches: [main]

jobs:
  gate-a-quint:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-a-quint.yml@main

  gate-b-docs:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-b-docs.yml@main

  gate-c-code:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-c-code.yml@main
    with:
      language: python

  gate-d-tests:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-d-tests.yml@main
    with:
      language: python

  gate-e-config:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-e-config.yml@main

  gate-f-security:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-f-security.yml@main
    # blocking: false (default) — security findings are advisory per STD-030

  gate-g-attribution:
    uses: sh4i-yurei/policies-and-standards/.github/workflows/gate-g-attribution.yml@main
    with:
      blocking: false

  cspell:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - uses: streetsidesoftware/cspell-action@v8
        with:
          files: "**/*.md"
